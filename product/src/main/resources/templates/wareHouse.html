<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org"> 

<head> 
	<meta charset="UTF-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"> 
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"> 
	<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/7656/7656409.png"> 
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
	<title>Inventory Management System</title> 
</head> 

<style> 
	@import url('https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@1,800&display=swap'); 

	body { 
		font-weight: 600 !important; 
		overflow-x: hidden; 
	} 

	.navbar-brand { 
		font-family: 'Noto Serif', serif; 
		margin-left: 1rem; 
		color: white !important; 
		font-weight: 700; 
		font-size: x-large !important; 
	} 

	.nav-link { 
		font-weight: 600; 
		font-size: 16px !important; 
	} 

	.nav-link:active, 
	.nav-link.active { 
		background-color: #198754 !important; 
		color: white !important; 
	} 

	.nav-link:hover { 
		color: white !important; 
		background-color: #198754 !important; 
	} 

	.content { 
		padding: 15px; 
	} 

	::placeholder { 
		font-size: 14px; 
		font-weight: 400; 
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; 
	} 

	td { 
		font-size: 13px; 
	} 

	label { 
		font-family: 'Noto Serif', serif; 
	} 
</style> 

<body> 

	<nav class="navbar navbar-expand-md navbar-light bg-success"> 
		<div class="container-fluid"> 
			<a class="navbar-brand" href="#"><i class="fa fa-align-center" aria-hidden="true"></i> Inventory</a> 
		</div> 
	</nav> 

	<div class="container-fluid"> 
		<div class="row"> 
			<div class="col-md-2 bg-light"> 
				<div class="bg-light min-vh-100"> 
					<div class="sidebar-sticky"> 
						<ul class="nav flex-column nav-pills" id="sampleTabs"> 
							<li class="nav-item p-2"> 
								<a class="nav-link text-success mt-5" data-bs-toggle="pill" href="#Home"><i
										class="fa fa-home"></i>Home</a> 
							</li> 
							<li class="nav-item p-2"> 
								<a class="nav-link text-success mt-2" data-bs-toggle="pill" href="#products"><i
										class="fa fa-database"></i>Products</a> 
							</li> 
							<li class="nav-item p-2"> 
								<a class="nav-link text-success mt-2" data-bs-toggle="pill" href="#addProduct"><i
										class="fa fa-plus"></i>Add Product</a> 
							</li> 
							<li class="nav-item p-2"> 
								<a  class="nav-link text-success mt-2" data-bs-toggle="pill" href="#searchProduct"><i
										class="fa fa-search"></i>Search Product</a> 
							</li> 
							<li class="nav-item p-2"> 
								<a class="nav-link text-success mt-2" data-bs-toggle="pill" href="#removeProduct"><i
										class="fa fa-trash"></i>Remove Product</a> 
							</li> 
                            <li class="nav-item p-2"> 
								<a class="nav-link text-success mt-2" data-bs-toggle="pill" href="#wareHouse"><i
										class="fa fa-database"></i>WareHouses</a> 
							</li> 
							<div id="temp">

							</div>
							
						</ul>
						
						
					</div> 
				</div> 
			</div>
			
			<div class="col-md-10"> 
				<div class="content tab-content"> 
					<!-- <div class="tab-pane fade active show" id="home"> 
						<h5 class="text-left text-success p-3">Welcome to the Inventory Management System ( Report ) 
							</h4> 
							<br> 
							<div class="row p-2"> 
								<div class="col-sm-6"> 
									<p class="p-2 text-left">Maximum Number of Products & Their Category 
									</p> 
									<div style="margin: auto;"> 
										<canvas id="maxproductChart"></canvas> 
									</div> 
									<script th:inline="javascript"> 
										var products = /*[[${products}]]*/[]; 

										var data = {}; 
										products.forEach(function (product) { 
											var key = product.productName; 
											data[key] = (data[key] || 0) + product.maximumProducts; 
										}); 

										var labels = Object.keys(data); 
										var values = Object.values(data); 

										// Generate an array of dynamic colors 
										var dynamicColors = []; 
										for (var i = 0; i < labels.length; i++) { 
											var r = Math.floor(Math.random() * 255); 
											var g = Math.floor(Math.random() * 255); 
											var b = Math.floor(Math.random() * 255); 
											dynamicColors.push('rgba(' + r + ',' + g + ',' + b + ', 0.6)'); 
										} 

										var ctx = document.getElementById('maxproductChart').getContext('2d'); 
										var productChart = new Chart(ctx, { 
											type: 'bar', 
											data: { 
												labels: labels, 
												datasets: [{ 
													label: 'Maximum Products Count', 
													data: values, 
													backgroundColor: dynamicColors, 
													borderColor: dynamicColors.map(color => color.replace(', 0.6)', ', 1)')), 
													borderWidth: 2 
												}] 
											}, 
											options: { 
												scales: { 
													x: { 
														title: { 
															display: true, 
															text: 'Product Name' 
														} 
													}, 
													y: { 
														beginAtZero: true, 
														title: { 
															display: true, 
															text: 'Maximum number of Products' 
														} 
													} 
												} 
											} 
										}); 
									</script> 
								</div> 
								<div class="col-sm-6"> 
									<p class="p-2 text-left">Minimum Number of Products & Their Category 
									</p> 
									<div style="margin: auto;"> 
										<canvas id="minproductChart"></canvas> 
									</div> 
									<script th:inline="javascript"> 
										var products = /*[[${products}]]*/[]; 

										var data = {}; 
										products.forEach(function (product) { 
											var key = product.productName; 
											data[key] = (data[key] || 0) + product.minimumProducts; 
										}); 

										var labels = Object.keys(data); 
										var values = Object.values(data); 

										// Generate an array of dynamic colors 
										var dynamicColors = []; 
										for (var i = 0; i < labels.length; i++) { 
											var r = Math.floor(Math.random() * 255); 
											var g = Math.floor(Math.random() * 255); 
											var b = Math.floor(Math.random() * 255); 
											dynamicColors.push('rgba(' + r + ',' + g + ',' + b + ', 0.6)'); 
										} 

										var ctx = document.getElementById('minproductChart').getContext('2d'); 
										var productChart = new Chart(ctx, { 
											type: 'bar', 
											data: { 
												labels: labels, 
												datasets: [{ 
													label: 'Minimum Products Count', 
													data: values, 
													backgroundColor: dynamicColors, 
													borderColor: dynamicColors.map(color => color.replace(', 0.6)', ', 1)')), 
													borderWidth: 2 
												}] 
											}, 
											options: { 
												scales: { 
													x: { 
														title: { 
															display: true, 
															text: 'Product Name' 
														} 
													}, 
													y: { 
														beginAtZero: true, 
														title: { 
															display: true, 
															text: 'Minimum number of Products' 
														} 
													} 
												} 
											} 
										}); 
									</script> 
								</div> 
							</div> 
					</div>  -->
					<div class="tab-pane fade" id="wareHouse"> 
						<h4 class="text-success p-2">WareHouse Data</h4> 
						<div class="table-responsive mt-5"> 
							<table class="table table-hover table-bordered"> 
								<thead class="bg-success text-light"> 
									<th>Name</th> 
									<th>Location</th> 
									<th>Products</th> 
								</thead> 
								<tbody> 
									<tr th:each="product, index : ${products}" > 
										<td th:text="${product.name}"></td> 
										<td th:text="${product.location}"></td> 
										<td th:text="${product.products}"></td> 

									</tr> 
									
								</tbody> 
							</table> 
						</div> 
					</div> 
					

			</div>
			<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
							<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
							<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script> 
							<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

							<script>
								$('a[data-bs-toggle="pill"]').on('show.bs.tab', function(e) {
										localStorage.setItem('activeTab', $(e.target).attr('href'));
									});
									var activeTab = localStorage.getItem('activeTab');
									if(activeTab){
										$('#sampleTabs a[href="' + activeTab + '"]').addClass('show active');
										
										ele = $("#temp");
										page = $(activeTab);
										home= $("#home")
										
										page.addClass("tab-pane fade active show");
								
									}
									else
									{
										page = $(activeTab);
										page.addClass("tab-pane fade");


									}
									function updateProduct(id,category,name,rating,quantity,price) {
										// var proyect= $("#category").val();
										// 						var sp = $('#temp2');
										// 						// console.log(productData);
										// 						sp.html = proyect;
										var text = id + " "+category+ " "+quantity+ " "+price+ " "+name+ " "+rating;
										
																$.ajax({
																	url: "/updateProduct/" + itemId,
																	type: "PUT",
																	contentType: "application/json",
																	data: JSON.stringify({ name: newItemName,category: category, rating: rating, quantity: quantity, sn:sn }),
																	success: function(response) {
																		alert("Item updated successfully!");
																		// Handle success response as needed
																	},
																	error: function(xhr, status, error) {
																		console.error("Error updating item:", error);
																		// Handle error response as needed
																	}
																});
															}
						</script>  
		</div> 
	</div> 

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script> 
</body> 

</html>